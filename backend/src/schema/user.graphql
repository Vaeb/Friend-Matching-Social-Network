type Me {
    id: Int!
    username: String!
    email: String!
    name: String!
    color: String
    universityId: Int
    confirmedUniversityIds: [Int!]
    birthDate: Date
    matchPrecision: Int!
    visEmail: Int!
    visInterests: Int!
    # relations: [UserRelation]
    # posts(limit: Int): [Post]
    # comments(limit: Int): [Int]!
    # reactions(limit: Int): [Int]!
    # savedPosts(limit: Int): [Post]
    updatedInterests: Date
    updatedAt: Date
    createdAt: Date
    uni: String
    # Match Settings
    manualEnabled: Boolean
    lastAutoMatched: Date
    autoFreq: Int
    matchStudents: Boolean
    snoozedUntil: Date
}

type User {
    id: Int!
    username: String!
    name: String!
    color: String
    confirmedUniversityIds: [Int!]
    birthDate: Date
    visEmail: Int!
    visInterests: Int!
    updatedAt: Date
    createdAt: Date
    # Relation Fields
    areFriends: Boolean
    friendDate: Date
    haveMatched: Boolean
    matchDate: Date
    compatibility: Int
    updatedCompatibility: Date
}

type UserCore {
    id: Int!
    username: String!
}

type UserRelation {
    user: User!
    # baseUser: User
    areFriends: Boolean!
    compatibility: Int
    haveMatched: Boolean!
}

type UserResponse {
    ok: Boolean!
    errors: [Error!]
    user: User
}

type MeResponse {
    ok: Boolean!
    errors: [Error!]
    user: Me
}

type UserCoreResponse {
    ok: Boolean!
    errors: [Error!]
    user: UserCore
}

type UserInterest {
    id: String!
    userId: Int!
    interestId: Int!
    user: User
    interest: Interest!
    score: Int!
}

input UserInterestInput {
    interestId: Int!
    score: Int!
}

type UserInterestResponse {
    ok: Boolean!
    errors: [Error!]
    userInterest: UserInterest
}

type Match {
    id: Int!
    user: User!
    matchDate: Date!
}

type Query {
    getUser(userId: Int!): User
    getUserByHandle(handle: String!): User
    getUsers(limit: Int): [User!]!
    getUserInterests: [UserInterest!]!
    getMatches: [Match!]!
    getChats: [User!]!
    me: Me
}

type Mutation {
    register(username: String!, email: String!, password: String!, name: String!, universityId: Int!): MeResponse!
    login(handle: String!, password: String!): MeResponse!
    logout: MeResponse!
    deleteUser: MeResponse!
    updateMe(username: String, email: String, oldPassword: String, password: String, name: String, color: String, birthDate: Date, universityId: Int): MeResponse!
    updateMatchSettings(manualEnabled: Boolean, autoFreq: Int, matchStudents: Boolean, snoozedUntil: Date): MeResponse!
    addFriend(userId: Int!, remove: Boolean): UserResponse!
    addUserInterests(userInterests: [UserInterestInput!]!): GenResponse!
    addUserInterest(userInterest: UserInterestInput!, override: Boolean): UserInterestResponse!
}
