type User {
    id: Int!
    username: String!
    email: String!
    name: String!
    matchPrecision: Int!
    visEmail: Int!
    visInterests: Int!
    relations: [UserRelation]
    posts(limit: Int): [Post]
    # comments(limit: Int): [Int]!
    # reactions(limit: Int): [Int]!
    savedPosts(limit: Int): [Post]
}

type UserCore {
    id: Int!
    username: String!
}

type UserRelation {
    user: User!
    # baseUser: User
    areFriends: Boolean!
    compatibility: Int
    haveMatched: Boolean!
}

type AuthResponse {
    ok: Boolean!
    errors: [Error!]
    user: User
}

type AuthResponseCore {
    ok: Boolean!
    errors: [Error!]
    user: UserCore
}

type UserInterest {
    userId: Int!
    interestId: Int!
    user: User
    interest: Interest
    score: Int!
}

input UserInterestInput {
    interestId: Int!
    score: Int!
}

type Query {
    getUser(id: Int!): User
    getUsers(limit: Int): [User]!
    getUserInterests(userId: Int!): [UserInterest]!
    me: User
}

type Mutation {
    register(username: String!, email: String!, password: String!, name: String!): AuthResponse!
    login(handle: String!, password: String!): AuthResponse!
    logout: AuthResponseCore!
    deleteUser(id: Int!): AuthResponse!
    addUserInterests(userId: Int!, userInterests: [UserInterestInput!]!): GenResponse!
}
